<!DOCTYPE html>
<html lang="en" class="no-js">
<head>

  <%- include('../include/open-graph', {canvas: canvash.canvas}); %>
  <!-- Mobile Specific Meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Favicon-->
  <link rel="shortcut icon" href="/img/fav.png">
  <!-- Meta Description -->
  <%- include('../include/description'); %>
  <!-- meta character set -->
  <meta charset="UTF-8">
  <!-- Site Title -->
  <title><%= canvash.canvas.users.primary.firstName %>'s Canvas</title>

  <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,400,300,500,600,700" rel="stylesheet">
    <!--
    CSS
    ============================================= -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core@4.7.4/css/ionic.bundle.css"/>
    <link rel="stylesheet" href="/css/linearicons.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="stylesheet" href="/css/magnific-popup.css">
    <link rel="stylesheet" href="/css/owl.carousel.css">
    <link rel="stylesheet" href="/css/hexagons.min.css">
    <link rel="stylesheet" href="/css/main.css">
  </head>
  <body class="canvas-background">

    <!-- Start Header Area -->
    <header class="default-header">
      <nav class="navbar navbar-expand-lg  navbar-light">
        <div class="container">
            <a class="navbar-brand" href="/">
              <img src="/img/logos/tristans-app-logo.svg" alt=""><span>Tristan's App</span>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="lnr lnr-menu"></span>
            </button>

            <div class="collapse navbar-collapse justify-content-end align-items-center" id="navbarSupportedContent">
              <ul class="navbar-nav">
              <li><a href="/support">Support</a></li>
              <li><a href="/terms">Terms and Conditions</a></li>
              <li><a href="/privacy">Privacy Policy</a></li>
              <!-- Dropdown -->
                <!--<li class="dropdown">
                  <a class="dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                    Pages
                  </a>
                  <div class="dropdown-menu">
                    <a class="dropdown-item" href="generic.html">Generic</a>
                    <a class="dropdown-item" href="elements.html">Elements</a>
                  </div>
                </li>-->
              </ul>
            </div>
        </div>
      </nav>
    </header>

    <div class="card-container">

      <!-- Start Canvas Area -->
      <div class="c-card">

        <div class="c-header clearfix">
          <div class="c-header-avatar" onclick="presentAlertConfirm()">
            <img class="avatar-primary" src="<%= canvash.canvas.users.primary.photo %>">
          </div>

          <div class="c-header-action">
            <ion-icon name="brush" class="more-icon" onclick="presentAlertConfirm()"></ion-icon>
          </div>

          <div class="c-header-info">
            <div class="c-header-info-text-bar"><b><%= canvash.canvas.users.primary.firstName %> </b><span class="light">@<%= canvash.canvas.users.primary.username %></span></div>
            <div class="c-header-info-text-bar"><%= canvash.canvas.description || 'No description' %></div>
          </div>


        </div>

        <div class="c-content" text-center>
          <img src="<%= canvash.canvas.imagePath %>" width="500">
        </div>

        <div class="c-actions clearfix">
          <div class="star" onclick="presentAlertConfirm()">
            <ion-icon class="star-icon" name="star-outline"></ion-icon>&nbsp;<span><%= canvash.canvas.stars %></span>
          </div>
          <div class="time"><ion-icon class="time-icon" name="time"></ion-icon>&nbsp;<span><%= canvash.utcFormatted %></span></div>
        </div>

      </div>
      <!-- End Canvas -->

      <div class="default-padding">
        <ion-label class="list-title">Memes</ion-label>
      </div>
      <% memeList.forEach(function(record){ %>
        <div class="c-card c-card-bottom-margin">

          <div class="c-header clearfix">
            <div class="c-header-avatar" onclick="presentAlertConfirm()">
              <img class="avatar-primary" src="<%= record.meme.users.primary.photo %>">
              <img class="avatar-secondary" src="<%= record.meme.users.secondary.photo %>">
            </div>

            <div class="c-header-action">

            </div>

            <div class="c-header-info">
              <div class="c-header-info-text-bar"><b><%= record.meme.users.primary.firstName %> </b><span class="light">@<%= record.meme.users.primary.username %></span></div>
              <div class="c-header-info-text-bar"><span class="light"><%= record.meme.users.secondary.firstName %> @<%= record.meme.users.secondary.username %></span></div>
            </div>

          </div>

          <div class="c-content" text-center>
            <img  src="<%= record.meme.imagePath %>" width="500">
          </div>

          <div class="c-actions clearfix">
            <div class="star" onclick="presentAlertConfirm()">
              <ion-icon class="star-icon" name="star-outline"></ion-icon>&nbsp;<span><%= record.meme.stars %></span>
            </div>
            <div class="time"><ion-icon class="time-icon" name="time"></ion-icon>&nbsp;<span><%= record.utcFormatted %></span></div>
          </div>

        </div>
      <% }); %>

      <ion-button class="load-more-button" expand="block" color="primary" onclick="presentAlertConfirm()">Load More</ion-button>

    </div>

    <!-- start footer Area -->
    <footer class="footer-area section-gap">
      <div class="container">

        <div class="row footer-bottom d-flex justify-content-between">
          <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
          <p class="col-lg-8 col-sm-12 footer-text m-0 text-white">Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a></p>
          <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
        </div>
      </div>
    </footer>
    <!-- End footer Area -->

    <script src="/js/vendor/jquery-2.2.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core@4.7.4/dist/ionic/ionic.esm.js"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core@4.7.4/dist/ionic/ionic.js"></script>
    <script src="/js/vendor/bootstrap.min.js"></script>
    <script src="/js/jquery.sticky.js"></script>
    <script src="/js/hexagons.min.js"></script>
    <script src="/js/main.js"></script>

    <script>
    function presentAlertConfirm() {
      const alert = document.createElement('ion-alert');
      alert.header = 'Download the App';
      alert.message = `<a href="/playstore?url=/canvas/<%= canvash.canvas.id %>" target="_blank"><div class="buttons flex-row d-flex play-store-download canvas-app-install">
        <i class="fa fa-android" aria-hidden="true"></i>
        <div class="desc">
            <p>
              <span>Available</span> <br>
              on Play Store
            </p>
        </div>
      </div></a>`;

      document.body.appendChild(alert);
      return alert.present();
    }
    </script>
  </body>
</html>
